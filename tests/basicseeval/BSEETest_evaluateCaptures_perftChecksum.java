package basicseeval;

import static org.junit.jupiter.api.Assertions.*;

import java.nio.ByteBuffer;
import java.util.zip.CRC32;

import org.junit.jupiter.api.Test;

import gamestate.Gamestate;
import gamestate.MoveGen;
import gamestate.MovePool;
import gamestate.GlobalConstants.PieceType;
import gamestate.GlobalConstants.Player;
import util.HitCounter;

class BSEETest_evaluateCaptures_perftChecksum {
	private Gamestate test_game = new Gamestate();
	private BasicStaticExchangeEvaluator test_eval = new BasicStaticExchangeEvaluator(test_game, 1);
	
	private MovePool movepool = new MovePool();
	private MoveGen test_move_generator = new MoveGen();
	
	ByteBuffer buffer1, buffer2, buffer3;
	CRC32 crc1, crc2, crc3;
	
	String checkSum;
	
	public void testPerft(String fen, int depth) {
		test_game.loadFromFEN(fen);
		crc1 = new CRC32();
		crc2 = new CRC32();
		crc3 = new CRC32();
		crc1.reset();
		crc2.reset();
		crc3.reset();
		buffer1 = ByteBuffer.allocate(2 * 6 * 8);// 2 players * 6 piece types * 3 output types * 8 bytes per long.
		buffer2 = ByteBuffer.allocate(2 * 6 * 8);// 2 players * 6 piece types * 3 output types * 8 bytes per long.
		buffer3 = ByteBuffer.allocate(2 * 6 * 8);// 2 players * 6 piece types * 3 output types * 8 bytes per long.
		perft(test_game, depth, 1);
		checkSum = getChecksum();
	}
	
	
	private void updateHashValue() {
		test_eval.initialize();
		test_eval.evaluateCaptures();
		buffer1.clear();
		buffer2.clear();
		buffer3.clear();
		buffer1.mark();
		buffer2.mark();
		buffer3.mark();
		for (int player : Player.PLAYERS) {
			for (int pieceType : PieceType.PIECE_TYPES) {
				buffer1.putLong(test_eval.getOutput_capture_winning(player, pieceType));
				buffer2.putLong(test_eval.getOutput_capture_neutral(player, pieceType));
				buffer3.putLong(test_eval.getOutput_capture_losing(player, pieceType));
			}
		}
		buffer1.reset();
		buffer2.reset();
		buffer3.reset();
		crc1.update(buffer1);
		crc2.update(buffer2);
		crc3.update(buffer3);
	}
	
	String getChecksum() {
		return String.format("%08X", crc1.getValue()) + String.format("%08X", crc2.getValue()) + String.format("%08X", crc3.getValue());
	}

	private void perft(Gamestate board, int depth, int ply) {
		updateHashValue();
		if (depth == 1)
			return;
		int test_movelist_size_old = movepool.size();
		test_move_generator.generateLegalMoves(test_game, movepool);
		
		for (int i = test_movelist_size_old; i < movepool.size(); ++i) {
			int move = movepool.get(i);
			board.makeMove(move);
			perft(board, depth - 1, ply + 1);
			board.unmakeMove(move);
		}
		movepool.resize(test_movelist_size_old);
	}
	
	static boolean skipAssertions = false;
	
	void test(String fen, int depth, String expectedChecksum) {
		testPerft(fen, depth);
		System.out.println("test(\"" +fen +"\", "+ depth+", \""+ checkSum+ "\");");
		if(!skipAssertions)
			assertEquals(expectedChecksum, checkSum);
		//System.out.println("collected checkSum: " + checkSum);
		
	}
	
	@Test
	void testWithPerft_captures() {
		test("3q4/3rr1k1/1nn2bbp/1pp5/4N1N1/1P1P3P/1PK2QP1/3R1R2 w - - 0 1", 4, "77EF35DE828245048717D440");
		test("8/2kr1bb1/3r1q2/1n1p4/1n6/1NPQ4/1K1R1BB1/3R4 w - - 0 1", 4, "4FF4AFA5D866ECC23BE2AE97");
		test("4r1k1/p4pb1/1p4p1/2p2q2/7p/P1P1B2P/1P1R1PP1/3Q2K1 w - - 6 35", 4, "2FB18E39D3D43C2775735F71");
		test("r1bq1r2/4n1k1/2pp2pp/p1p1p3/4Pp2/P1NP1N1P/1PPQ1PP1/1R3RK1 w - - 0 15", 4, "A5D69871044D5F2DDC1E5D4B");
		test("8/ppn2p2/2p1bk1p/2P4P/PP1PBKP1/5P2/8/8 w - - 1 38", 4, "34258CE92DF73936228C48E0");
		test("r5k1/p4p1p/2nR2p1/2p1r1N1/2b5/P1P1B2P/2P2PP1/4K2R b K - 0 20", 4, "A5F1DBBFC41C8EE6E662B38A");
		test("r2q2k1/ppn2pbp/2p2ppB/5B2/3P3Q/7R/PPP2PPP/6K1 b - - 4 19", 4, "75C903AF4A04407F717A1E9D");
		test("2b1r1k1/1p3pp1/2p1pb1p/q2P4/p1P5/3B1Q2/PP3PPP/R3R1K1 b - - 0 23", 4, "5F1536220DADEE4D8D0E53B0");
		test("r1b1Rnk1/ppp2p1p/6pQ/5p2/3q4/3B2N1/PPP2PPP/6K1 b - - 1 16", 4, "D1674E9B0FF2876EC5CCE6D3");
		test("4r3/p1q3k1/5r1p/3Bb1p1/2P1pp2/1P5P/PBQ2PP1/1R1R2K1 w - - 0 26", 4, "110866FBA68ED8FB71C261DC");
		test("r3r1k1/pp1q1pp1/2p2p2/5b1p/3P1P2/2PBR1Q1/PP3P1P/R5K1 b - - 1 19", 4, "817074D52E54DB356D1E9F66");
		test("r2qr2k/p6p/3ppnR1/2p5/1bpnPP2/2N4Q/PPPB3P/2KR4 w - - 0 21", 4, "2B5E3AE6DCDB5804DA73688C");
		test("6rk/1pp4p/pb1pNpq1/3P4/8/P4Q2/1PP3PP/R6K w - - 5 23", 4, "4193771499C2EB03A2778B1E");
		test("5rk1/1p2Rpbp/3p2p1/3P4/5P2/3QB1KP/5RP1/q6r b - - 7 23", 4, "2FD74DB1990B0B3DBF6D5A67");
		test("r2qr1k1/p2n1pp1/1p3n1p/3p4/3P3B/3QPN2/P4PPP/R4RK1 w - - 0 16", 4, "4CDC553E158237EB2BF3488E");
		test("r2qr1k1/pp3pb1/2p1Rpp1/8/2PP1BQ1/6P1/1PB2P2/5RK1 w - - 1 27", 4, "BE5CF795AC72BAA080DB5366");
		test("8/1p3r2/3pk3/p1q2p2/P2b4/3P3Q/1P3RPP/5RK1 b - - 2 26", 4, "2A61484ADE6B039BA86764F4");
		test("r2q1rk1/pp3pp1/2n2n1p/3p3b/7B/2PB1N1P/P1P2PP1/R2Q1RK1 w - - 1 14", 4, "A56BD4C3907292B59246FFB1");
		test("3r1rk1/p4p2/2p3pp/2q5/4Q3/1PpN3P/P1P1R2K/R7 b - - 2 26", 4, "F1B96830D9B96A55405BB458");
		test("r1bk3r/1pqpb3/p3p2p/2p1NppQ/2P1N3/3P2PP/PP1B1P2/R4RK1 w - - 2 17", 4, "768993C8ED9D63C1EA0904D5");
		test("5rk1/pp1r1ppp/1qp1pn2/8/2PP4/1PQ2BP1/P4P1P/3RR1K1 w - - 5 19", 4, "DDCCDFED0D5734EBA7072006");
		test("b3r1k1/5p2/p3q2p/3p1Bp1/1P1Q2PP/P1R1PP2/6K1/8 b - - 1 35", 4, "854600E100213738F2D17131");
		test("2qr2k1/5rp1/1p1b1n1p/p2BB1p1/2P3P1/1P5P/P1Q2P2/3RR1K1 b - - 0 31", 4, "85E28A1076AE423CABD78237");
		test("2k4r/1p2b2p/1p4p1/1b2n3/3pN2N/8/PPP3PP/R3R1K1 w - - 2 24", 4, "7B7F8C28AE1504ABD9BA0A73");
		test("4r1k1/p5pp/8/8/2qb1N2/4nQP1/P5BP/4R2K b - - 1 32", 4, "29F4CBF379A768612A409AF7");
		test("3r2k1/p7/2p1p1Pp/2p5/2b3Pq/7P/P1P2RB1/4Q1K1 b - - 0 34", 4, "E17B94605EAD2DB94E7032AA");
		test("6k1/1ppq1rp1/p1n4p/4pN1n/2b1P1P1/2P1Q2P/PP3RBK/8 w - - 0 26", 4, "378368B649C33899CD874B92");
		test("r4qk1/pp1n2pp/2p5/3P4/3P1r2/3B3P/P2Q1PP1/R3R1K1 b - - 0 19", 4, "8295910C04CC1C0332E2B0E1");
		test("2r2rk1/pp2bpp1/2n4p/3pPR1P/3P2P1/2B2N2/PP6/5RK1 b - - 2 24", 4, "5419BAC8C272B1C93014E81A");
		test("r2q2k1/pb2b1pp/1p6/2p1P3/5r2/1P2pP2/PB4BP/2RQ1RK1 w - - 0 19", 4, "CF01DFAD1332C61527B354CB");
		test("r2q2k1/ppn2pbp/2p2ppB/5B2/3P3Q/4R3/PPP2PPP/6K1 w - - 3 19", 4, "FB7D13253929DBC0FD90243F");
		test("r2qr2k/p6p/3ppnR1/2p5/2p1PP2/2n4Q/PPPK3P/6R1 w - - 0 24", 4, "AE7D8D536A992723CCC32957");
		test("r5k1/1pp2q1p/pb1p1p2/3n4/4PN2/P7/1PP3PP/R2Q3K w - - 0 20", 4, "6B9BF0D8DA186F5F1E6B4303");
		test("r6k/ppN1P2p/2n3p1/2p1b1B1/2B5/8/P5PP/6K1 w - - 3 28", 4, "61A694AFF83D62AA45C6B682");
		test("r1b1k2r/1p3ppp/p1n1pn2/2bp4/8/2N1PN2/PPPB1PPP/2KR1B1R b kq - 0 10", 4, "151358E4A2EDE161D7AE14A2");
		test("3rqrk1/1p5p/pN1p2n1/P1pPp1pn/2P1PpN1/R4P1P/1P4P1/2Q2RK1 b - - 8 20", 4, "90744E3E2AC310422D37A1CA");
		test("4r1k1/pp3q1p/2p5/2PnPbBp/8/6Q1/PP3PP1/4R1K1 w - - 0 27", 4, "D8D599E83BE3143B44D8C565");
		test("r1b1r1k1/pp1qnp1p/2pb2p1/5pB1/3P4/2PB1QN1/PP3PPP/4RRK1 w - - 0 14", 4, "9C7752E73967849FBA47CD10");
		test("5rk1/p4Rpp/Pp1p4/2p5/2P5/1PN1b3/1Bb3PP/R5K1 w - - 1 28", 4, "F4E2FE134583C552F6D71CF4");
		test("4k2r/2pq1p2/p2bpP2/1r1B2B1/1ppP3P/4Q3/PP3PP1/2KR3R b k - 0 20", 4, "A080A8857DDE03CCE2C47F3A");
		test("r1r5/p3kppp/Np1np3/3p4/3P4/PP2P2P/4KPP1/R1R5 b - - 4 25", 4, "83838FB53B5EA47E8EFD7995");
		test("8/8/7p/2Pn2P1/2kP4/1p3r2/pK6/R3B3 w - - 0 52", 4, "5A7C74F7F3DB8C0CB9EC911B");
		test("1R6/2r2p2/8/2r1k1p1/2p4p/1p2P2P/1P2K1P1/2R5 w - g6 0 36", 4, "399BE11EC61B4FA2D5772AFE");
		test("2Rr2k1/1p1P1p1p/pN4p1/8/3br3/3p1R2/PP4PP/6K1 w - - 2 29", 4, "CB5C28FCC5CC56917FECF4E5");
		test("r2qk2r/ppp2ppp/3p1n2/2b1p3/N1BnPP2/3P2Q1/PPP3PP/R1B1K2R b KQkq - 2 9", 4, "996F2E03161FCB5DBA7A1828");
		test("r1r3k1/p4ppp/2p2b2/N3p2b/2P1N3/5PP1/P3P2P/2RR2K1 w - - 3 23", 4, "0AE991DFBDCCD51E1262AB99");
		test("r3r1k1/pp2qpp1/2np3p/5b2/5P2/2Q4P/PPP1N1P1/2KR1B1R w - - 1 15", 4, "45A277E2CDD16E62DB36840E");
		test("8/2k2p2/1p5p/p1p1nN1P/3pn2R/1P6/P3K3/8 b - - 1 33", 4, "77E46C8DDB244A6C5620CB89");
		test("8/6k1/3p4/1BnP1pp1/p2R4/P3rP2/1P1K2P1/8 b - - 3 31", 4, "32AC3A5529D3C77D190A8AD2");
		test("6k1/ppq2B1p/6p1/8/4Qp2/P1P2PbP/1P1N2P1/7K b - - 0 31", 4, "E24AC77BA2FD83F46633F7B3");
		test("r7/p3Rp2/1ppN2kp/3n2p1/8/P6P/1PP3P1/2K5 w - - 2 28", 4, "7CA02A23ABFB01BBE4159C85");
		test("3r2k1/6b1/2R1p3/Np3pp1/1p4P1/1P1nPN2/P4PK1/8 b - - 1 30", 4, "0DB4BE55A66E62BDCB37EF82");
		test("2rr2k1/3b1ppp/p1nR4/1p2p3/4P3/P4N2/1PP1BPPP/5RK1 w - - 1 19", 4, "C1AE0D47F59628AFF223FC94");
		test("6k1/2p5/p1p4p/3pq1p1/3B3n/P5K1/1PB5/8 w - - 0 32", 4, "2E08BEE4D9BE6E7A7E23F888");
		test("3bk3/5pp1/1n5p/1P1N4/1B1p4/5P2/P4KPP/8 w - - 3 35", 4, "4F7F8EE04029A3D4585BF62A");
		test("r3r1k1/b1p2pp1/p2p2np/1p1P1q2/2nP4/P4NBP/BP3PP1/2QRR1K1 w - - 1 21", 4, "AC88466C9B52A12B489038EA");
		test("r2q1rk1/1p3pp1/p1b4p/4R3/3B4/P2B3P/1PP2PP1/R2Q2K1 b - - 0 19", 4, "95C0B96349395A383B0F25E8");
		test("2rq1bk1/5pp1/p2p3p/np5b/3pr3/P4NNP/BP1Q1PP1/R1B3K1 b - - 1 21", 4, "650E4308E585D35B9572751F");
		test("r1b1r2k/ppn3pp/2p5/4p3/1BB2p2/P4P2/1qP3PP/R2QR2K w - - 4 20", 4, "94E44B9ACD051763535B51D5");
		test("rnbq1rk1/2p1n1b1/pp1p2pp/3PpP2/2P5/2N1B2P/PP2BPPN/R2Q1RK1 b - - 0 12", 4, "A185C90716D90719592B9014");
		test("4r1k1/5p1p/p2q2pb/1pppN3/3P4/2PQP1PP/P6K/4R3 w - - 0 33", 4, "147226257557556779B2B955");
		test("3q1rk1/pp3pbp/2rnp1p1/3pB3/3P2P1/P1P4Q/1PRN1PP1/4R1K1 w - - 5 22", 4, "AA46375662C4ABC2324913FC");
		test("8/5n1P/5k2/1p1K4/8/P7/8/8 w - - 1 50", 4, "4E86D8AB414194D23B993BBE");
		test("3r3r/p3kp2/1pn4p/3n4/2p5/1N3PP1/PP1BP2P/2RR2K1 b - - 1 27", 4, "BD48E5F9DE66F2B78EF1C95F");
		test("4q1k1/2p2p1p/p4Bp1/7r/3PBQ2/2P2P2/5PK1/8 b - - 5 29", 4, "AF8A446A16F7E998DBFCA38A");
		test("r1bqr1k1/1p3pbp/2pp1np1/4n3/2P2N2/1pN3P1/PB1QPPBP/3R1RK1 w - - 0 14", 4, "E874081357A68939C409E727");
		test("2r3k1/5pb1/pq1pb1p1/7p/3pP2P/B2P2P1/3Q1PB1/R5K1 b - - 3 25", 4, "5651086F1E4701F2F213E9BF");
		test("3r4/pQp3kp/1p4p1/4p3/4N3/1P1PPnP1/P6q/2RR1K2 b - - 6 29", 4, "A33E74F2CC764298C9F42BB3");
		test("2rq1rk1/p3bppp/1p2p3/3n4/3N1B2/3Q2P1/PP2PPKP/2R1R3 w - - 11 18", 4, "A983D0903E29BB4D522BE526");
		test("r3r1k1/1p1b1pp1/1qnpp2p/pNb5/Q1PpN2P/P2P2P1/1P2PPB1/R1R3K1 b - - 3 17", 4, "AE6B4D44A68C9CD3BE7FA9F7");
		test("r1r1n2k/1p4b1/6P1/3NqQ1p/1p2P3/4B2P/6P1/2R2RK1 b - - 6 30", 4, "B5729B65D31BB9A053BDB598");
		test("r4rk1/3qp2p/3p2p1/p1pPpbN1/PpP4P/1P2QPP1/R3P2K/4R3 w - - 2 27", 4, "072BD30A6C0675AB3C19CBF8");
		test("4r1k1/2p2pp1/5n1p/p1R5/P2P1N2/4r1qP/5QP1/5RK1 w - - 2 26", 4, "99A40DF2293DC2B63C0074ED");
		test("2r1r3/pp1q1pk1/4bnp1/1P1p1n1p/3PpP2/PQ2N1PP/1B3PBK/2RR4 b - - 0 24", 4, "43D2352817D2FF00B3B3DA09");
		test("4k2r/1p1bpp2/p2p1p1b/q6p/2r1PP2/2N2NP1/PPPQ3P/1K1R3R w k - 0 17", 4, "F63FAAB489311FC15486925F");
		test("5rk1/4pp1p/1pn2bp1/3b4/8/3P1NP1/RP2PPBP/2B2RK1 b - - 0 15", 4, "DC09496EF4F85EB64764DD46");
		test("8/8/8/6p1/5k2/5P1p/5K2/8 w - - 0 65", 4, "C813534C7B941D5E8DF6A363");
		test("8/3k1pp1/7p/3n4/2R5/2N3P1/Pr3PKP/8 b - - 0 36", 4, "764EE05F7A072485782F1A56");
		test("8/8/5pk1/1p2p1p1/4Rn1p/P1P2P1P/1P1R2P1/5qBK w - - 18 53", 4, "9737B8B6D9EDA53F5DA2AE3E");
		test("r3k2r/1pq3pp/p1n1pn2/6P1/3B4/8/P1P1BP1P/R2Q1K1R w kq - 1 16", 4, "659E2C559897ACAE1FD3B10A");
		test("r3k3/pb2q3/n1p1p3/5p2/PppP4/6P1/1PQN1PB1/R3K3 b Qq - 1 20", 4, "5D72992114329CDCD4301774");
		test("8/1Q3p1k/4qnp1/4p3/8/2Q3PP/7K/8 w - - 7 44", 4, "281C7DB3CE0D3AB7B668183D");
		test("4k2r/1q2bp2/4p3/pP1pPp2/P1rB2P1/2P4p/5Q1P/R1R3K1 w k - 0 30", 4, "258A559870041D175FAA9A44");
		test("r7/P7/1r1pkpp1/2n4p/5B1P/4RPK1/3R2P1/8 b - - 11 40", 4, "9A4E3C773880D169C6488195");
		test("5bk1/p4p1p/1P4p1/3p4/3P4/4P1P1/2rB1P1P/1R4K1 b - - 0 24", 4, "9D5AED02F03F714375205365");
		test("8/8/5kp1/6Np/2B4P/3P2P1/5PK1/2r5 w - - 1 36", 4, "E64ED8033B1380B9DAD25EBD");
		test("rn2kb1r/pp3ppp/3pbn2/8/2B1Q3/5N2/PPP2PPP/R3K2R w KQkq - 3 13", 4, "4656AFFB8C381C3E8293BFAF");
		test("2kr1b1r/ppp3p1/5n2/3q2Np/3p2b1/P2P4/1PPNBP2/R2QK1R1 w Q - 0 15", 4, "765474F7D05579A7AB352AEB");
		test("r1bk1br1/pp1ppp1p/2n5/1R1N4/4P2p/3BQ3/q1P2KPP/6NR b - - 1 16", 4, "EB3FACEDAB2867010AD3D3C2");
		test("8/6p1/p2nk1p1/1pN2pP1/nP3P1P/2P2BK1/1P6/8 b - - 6 37", 4, "58638C271A578A8B5F5BEC7F");
		test("3rr1k1/p3qp2/2p3p1/4Bb2/1pP1PP1p/3B2nP/P1Q3P1/3RR1K1 b - - 0 24", 4, "46A29E7A6B7EA4C4FA4A8469");
		test("8/7p/1P1k2p1/6P1/3K1p1P/4P3/8/8 b - - 0 52", 4, "425102F504B3B5CE7094EEDF");
		test("3r2k1/pp3ppp/4pb2/5b2/2Pq4/5BP1/PP1B1P1P/2QR2K1 b - - 3 22", 4, "C256EF8E5F9754A65FB45FD3");
		test("r1b1kb1r/pp1p2pp/4pP2/8/2qn1BQ1/8/PPP2PPP/RN2R1K1 b kq - 0 11", 4, "8236AA2C74241C5349E6A9CB");
		test("4rrk1/5pp1/8/p4q1R/1np4P/2B5/PPP2PP1/1K1Q3R b - - 4 26", 4, "E8952077773E68085A33C50E");
		test("2r3k1/4Rpp1/4b2p/8/8/4QB1P/Pq3PP1/4r1K1 w - - 0 26", 4, "F90443663288726CD57EC647");
		test("r4k1r/p4Ppp/2pb2q1/1p3bB1/8/1B3n2/PPP1QPPP/2KR3R w - - 1 17", 4, "2C4DFC3BCEEC458A2100F5C3");
		test("r2q1rk1/pp3ppp/2nbpn2/3p3b/3P4/2P1BN2/PP1NBPPP/R2Q1RK1 w - - 6 11", 4, "D55ED73C94363248A2C03138");
		test("r1b1k2r/pp3pp1/2nppq1p/8/3PP3/P4N2/1P1Q1PPP/2KR1B1R b kq - 1 11", 4, "B241A67C1C6C050192EC7223");
		test("r4rk1/ppp2pbp/5np1/2n1p3/4P3/2Pq2PP/PP1NQPB1/R1BR2K1 w - - 5 15", 4, "29B2F44CA15E50B3115D8E73");
		test("3k4/2p2p1p/6p1/2R1p3/P3P2P/3B2P1/1b2KP2/2r5 w - - 4 40", 4, "88103664F325C9FD269EB588");
		test("r1b1k2r/ppq2pp1/3bpn1p/2p1N3/3P4/2PB4/PPQ2PPP/R1B1R1K1 b kq - 1 13", 4, "70262DB4A9ED1EAE36B3C96D");
		test("8/2r3p1/3kpp1p/1p6/pPnP1P2/P2K1NP1/2R3P1/8 b - - 2 37", 4, "C26AD7EE0F21D39AB2446302");
		test("r1bqr1k1/p1pn1pb1/1p1p1npp/4p3/3PP3/2PB1NNP/PP3PP1/R1BQR1K1 b - - 1 11", 4, "F4B05142F915313BF69B0680");
		test("3qr1k1/6b1/n5p1/PQ1Pp2n/1P2Pp1p/2P2P1P/4NBP1/R1R3K1 w - - 3 31", 4, "28948394CFEBC5A52F808DCA");
		test("5bk1/3R4/5Qp1/P3p3/1P2P3/2P2PpP/5qP1/R6K b - - 8 44", 4, "56176BC555E75F58024A6537");
		test("r2qkb1r/pp2pppp/2n2n2/3p4/3P1Bb1/1QPB4/PP3PPP/RN2K1NR b KQkq - 4 7", 4, "CE209F6D226BC19BE6850143");
		test("3r2k1/2rn1pp1/pq2p1p1/1p1p3P/3Pn1P1/P1PB1N2/1P2QPK1/3R3R w - - 1 30", 4, "690B80CDE826586FAF0495F3");
		test("8/3R4/p1r1pkp1/1p4N1/3P2r1/P1P2K2/1P3P2/7R b - - 1 41", 4, "086E442D40060E3B6C60E219");
		test("rn1qk1nr/1bp1ppbp/pp1p2p1/8/3PP3/2PB1N2/PP3PPP/RNBQ1RK1 w kq - 2 7", 4, "E84C07E194A0F3C967956355");
		test("r2qrn2/1b3Qbk/p1nBp1pp/1p2P3/3P4/3B1NNP/PP3PP1/R3R1K1 w - - 1 19", 4, "17EB3FED9EB6D6C3A0AFDDE5");
		test("r2qr1k1/p1pn1pbp/Ppbp1np1/4p3/3P4/2N1PN1P/1PP1BPPB/R2Q1RK1 b - - 2 12", 4, "55712A5BDA82C7A054DCFDE6");
		test("rnbqk2r/ppppppbp/5np1/8/3P1B2/5N2/PPP1PPPP/RN1QKB1R w KQkq - 2 4", 4, "B765A2FEACF66D5C75B44F5D");
		test("r1bq1rk1/pppnppbp/3p1np1/8/3PP3/2PB1N1P/PP3PP1/RNBQ1RK1 b - - 2 7", 4, "DBC9A3F8736FF16A8A01136C");
		test("2brrnk1/pp3p2/2p2Qp1/6Np/1qP1P3/3B2NP/P4PP1/3RR1K1 w - - 2 24", 4, "F9CFA3D3D0CB07CF9CB63006");
		test("4r3/8/p1p2Bp1/1pPp3k/1P2pPpP/P3K1P1/8/4R3 b - - 1 50", 4, "04B175AB144875F95FE3491C");
		test("4r3/4r3/p1p3p1/1pPpbp1k/1P3PpP/P2KB1P1/4R3/4R3 w - - 0 47", 4, "65CE6622AE6E0CBE7D560846");
		test("2k4r/pp6/2p2pp1/2p5/3qQPP1/P2P3P/1PP5/1K5R b - - 0 27", 4, "AAB1961AF5C32AD7FB4364EE");
		test("q5k1/1P3ppp/b2r4/P4Np1/1P1N3n/1KP3QQ/2P1r1B1/8 w - - 0 1", 4, "92E177924A2E685BDEE581DF");
		test("2br4/1p4pp/q2r1k1n/p6P/p2K1PP1/n5N1/1Q4BP/5R2 w - - 0 1", 4, "024783788237347E8B7D58B2");
		test("4r1k1/pbq3p1/1p1rpn2/1n3b2/1Ppp4/P4PP1/1PP1PNBP/1NB2K2 w - - 0 1", 4, "1C59A742A5E57787CDADF46D");
		test("2q3k1/1b3ppp/1bq5/rr4n1/7n/8/PQQRQQ1r/1K2R2B w - - 0 1", 4, "AF5653F531AD36DCC2BD6C6C");
		test("2r5/1qr2p2/3p2n1/1P2pp2/3k3P/1PP1RP2/1BPK1NN1/2N1R3 b - - 0 1", 4, "EB225AE667CE71E205981E46");
		test("kr2q3/1n4pr/npp1P3/p4P2/1PP2P2/1NB2N1B/1KQ5/R6R w - - 0 1", 4, "20387BB6F9D4979A4E700E30");
		test("nk6/1pp1nppb/P7/5Q2/R7/3q4/1Q3PPP/5RK1 w - - 0 1", 4, "4BB1988CAE162F7DDAD590C1");
		test("3r1q2/rb1pp1n1/1p2k2p/p5p1/2KP1p2/PB6/1Q4PP/5R2 w - - 0 1", 4, "88A6A8BD007209EAE4C7E7CC");
		test("8/8/8/1k4r1/8/8/3K4/8 w - - 0 1", 4, "6F3585BC589D7ABEB04864C9");
		test("8/4q3/8/1k6/8/8/3K4/8 w - - 0 1", 4, "11847CAE26B702B9033CF45B");
		test("8/2q1qr2/2b2pp1/1k5r/1pp2nn1/3P4/3K4/8 w - - 0 1", 4, "F1F06D3E6033B0E9C6F635B9");
		test("8/p4p2/4k1pp/4R3/1P4P1/P2P3P/4K3/8 b - - 0 41", 4, "0BAA7B2DDC373DD2CD92F52F");
		test("r4rk1/p4p1p/6p1/1B6/3QP1nq/P6P/1PP3P1/3R1R1K w - - 3 26", 4, "A01BFEB218F057CF7C57BE20");
		test("r1b2rk1/3p1p1p/pp1Ppn2/5p2/1PP2P2/P2B4/1B4PP/R4RK1 b - - 1 19", 4, "53DEE67F3364EE680CDFDA5E");
		test("r1bqr1k1/1p1n1pbp/p1pp1np1/8/2P1P3/2NBBN1P/PP3PP1/R2Q1RK1 w - - 0 12", 4, "D551AC4FD660DED694240DC5");
		test("4r1k1/4P2p/r2B2p1/2p3p1/3b4/8/PP2RP2/3R1K2 w - - 1 32", 4, "F31DAD12C5B40BC7A7242A44");
		test("8/5k2/r4Bp1/6p1/P1R4p/8/5P2/5K2 b - - 0 41", 4, "B667FF5E6F064C1C412AE522");
		test("1r1q1rk1/1p1bbppp/p3p3/5n2/PnP2P2/2NP1N1P/1P2BBP1/R2Q1RK1 b - - 2 15", 4, "E27F8A909049A2A584F940DC");
		test("q5k1/1p3Qp1/4p3/4N3/2P1PP2/6PP/r5BK/3R4 b - - 2 38", 4, "E44FBFEF875125AA546173B5");
		test("r2q1rk1/1b1n2b1/1p4pp/2pPpp2/p1P1P3/3B3P/PP1NNRP1/R2Q2K1 b - - 0 18", 4, "2003FAD25FCB2E7898DD29B9");
		test("3q1nk1/r2P2b1/1p6/1Pp1pBp1/2P1PpNp/7P/1P3RP1/3Q2K1 w - - 1 35", 4, "666F0B48BA6039577183B1FC");
		test("rn1q1rk1/p1pp1ppp/1p6/b2Q4/8/5N2/PBP2PPP/1R3RK1 b - - 0 13", 4, "D975244DFF002A42D04614D3");
		test("6k1/p1p1rpN1/1p1p2p1/b7/2P4P/5P2/Pr4P1/3R1RK1 w - - 0 28", 4, "AE02D11AA76659ED812F50ED");
		test("8/p1b5/5kp1/1ppR4/2P2PR1/3K4/P2r1r2/8 w - - 6 40", 4, "CA20F32D160C4092654D4F7E");
		test("r3r1k1/pq1n1ppp/4pb2/2p5/8/2PP1N1P/3Q1PP1/R3RNK1 w - - 0 22", 4, "0A6BA3F00001B1208CEDAD36");
		test("1r4k1/5pp1/7p/1p6/3N4/7P/1r3PP1/R5K1 b - - 1 36", 4, "5ABE26D98566E8E17A04221B");
		test("1r4k1/5pp1/7p/8/8/R6P/2q1KPP1/8 w - - 0 44", 4, "1D280B9FA8886EAA7A66E46C");
		test("1rbq1rk1/4bppp/2p1pn2/p7/2p1PP2/P1N1B2P/1PP1NQP1/1R3RK1 b - - 3 15", 4, "98AEED6E94BF80298CB44C4C");
		test("8/6pk/7p/p1p1R3/5P2/q1p4P/6PK/8 w - - 0 40", 4, "CF78CCDFF00A60E1AD7191AD");
		test("5rk1/5pp1/7p/3p4/1Pb5/P7/5PPP/2R3K1 b - - 2 33", 4, "9C1F181AF2DC738ED46A5BF1");
		test("7R/8/8/2Kp4/k1b4P/6r1/8/8 w - - 9 61", 4, "CF5D00670E41CE78ECE7578C");
		test("2r1k2r/1p1n2p1/p1pB1pbp/P1Ppp3/1R1P4/4PP1P/1P1K2P1/5B1R b k - 1 21", 4, "72B274E7AE6F7BDD78EA02A6");
		test("r5k1/2r3p1/B1b2p1p/PPPp1P2/3P2P1/7P/3K4/7R w - - 0 34", 4, "696A61EEEA66E3920AF17D23");
		test("2r3k1/6p1/1RP2p1p/3p1P2/2r3P1/1K5P/8/8 w - - 3 44", 4, "43873CA80B81E668AC966907");
		test("rnbqkbnr/ppp3pp/5p2/3pp3/3P3B/8/PPP1PPPP/RN1QKBNR b KQkq - 0 4", 4, "47169A2BC2B23E8A46A5D98B");
		test("rn2k2r/pp1qn2p/2pb1pp1/3p1b2/3Pp3/2N1P1BN/PPP1BPPP/R2QK2R b KQkq - 3 11", 4, "53EFE182FD4A6620B2C8BB9E");
		test("2kr3r/p1n1n3/2p2q2/1p1p2pp/3P4/P1NBBp2/1PPK3P/5R1R w - - 0 32", 4, "3366767CB1DB2B244EF62197");
		test("2kr4/p1n5/2p5/1p1p1n2/8/P7/KPP5/5Nq1 b - - 0 44", 4, "B448FB508A9C3A9E15B0DED3");
		test("r1b1k2r/pp3ppp/2n2n2/q1Pp4/1b3B2/2N2N2/PPQ1PPPP/R3KB1R w KQkq - 3 9", 4, "02CB78ED041F4E466CF463F8");
		test("r6k/p5pp/2p5/4p3/2B1P3/2P5/P3K1PP/8 b - - 1 24", 4, "739D59055FD3AF7A77440F96");
		test("8/7p/2p2kp1/p3p3/4P2P/2P1K1P1/r3B3/8 w - a6 0 31", 4, "22093400892CC61DB7C84C81");
		test("rnq3nr/2kbbppp/p1pPp3/Pp1P4/4PP2/1QNBBN2/1P4PP/R3K2R b KQ - 0 14", 4, "91DC7E816224031D1D975844");
		test("r1q1kbnr/3n1ppp/pBpPb3/Pp2Pp2/8/2NB1N2/1PQ3PP/R4RK1 w - - 4 21", 4, "9529D6EBB4D15B880900272E");
		test("rq2kb1r/1P4pp/p2P3n/1Np1P3/4B3/8/1PQ3PP/R5K1 b - - 0 28", 4, "88CE7CE9316356DE8D059B44");
		test("1r6/1P1k1npp/3P4/2Q5/4B3/8/1P4PP/6K1 w - - 1 35", 4, "450C04E1B0D822ADAAD58CB4");
		test("rn2k2r/p4ppp/2pq4/8/p2Pn3/3P1RbP/PP2P1B1/R1BQ2K1 b kq - 0 15", 4, "2574AFE0E1E3F1D2393F1293");
		test("r4rk1/p4ppp/2n5/3p4/6Q1/1P1P2bP/P3PqB1/R1B4K b - - 4 23", 4, "FD35E6999B3D80B0CAE15F94");
		test("r1bqkb1r/pppp3p/6p1/3N1pN1/3nn2Q/3P4/PP3PPP/R1B1KB1R b KQkq - 1 10", 4, "2429C465074E030D3BA48538");
		test("r1b4r/pp1pk2p/6p1/5p2/2qnN2Q/8/PP3PPP/R1BK4 b - - 1 17", 4, "F739D238557C31E056207DC2");
		test("r1b4r/pp1p3p/1k4p1/5p2/2qn4/Q1N5/P4PPP/R1BK4 w - - 8 25", 4, "4E5FF5978E5C094F8E0133F5");
		test("r1bqk2r/pppp1ppp/5n2/4n3/1b1N4/2N5/PPP2PPP/R1BQKB1R w KQkq - 0 7", 4, "E70C790E4239830BAA4CB573");
		test("r3r3/pp1b1pp1/5k1p/2pp4/3N1P2/P1PP2P1/3K3P/R3R3 w - - 0 20", 4, "CFC83A3FC0EA2FD21DC452EF");
		test("8/p4pp1/1p2k2p/3pN3/3P1P2/P5Pb/4K2P/8 b - - 2 29", 4, "5DDF2F4DDD8E69F106758199");
		test("8/6p1/7p/3p2p1/p2k1P1P/K7/8/8 w - - 0 43", 4, "C9B032E816FF0215F0257D8B");
		test("1rb2rk1/5pp1/pq5p/1p1B4/2p2P2/6P1/PP5P/R2Q1RK1 w - - 2 20", 4, "45D5142451C6B6FE34FA4E25");
		test("6k1/5pp1/pq5p/1p6/2p2PQ1/6P1/PP1rrR1P/5RK1 w - - 10 27", 4, "B8D0284CA2DC78AF26241CBA");
		test("r1b1k2r/pp1pR2p/6p1/5pN1/2qn3Q/8/PP3PPP/R1BK4 b kq - 0 16", 4, "2D8EC1AE21CCB7B1ECFD1D5C");
		test("r1b4r/pp1p3p/6p1/3NQp2/2q5/1k6/5PPP/R1BK4 w - - 0 24", 4, "090D1A0B3D81DF9CBC51B2F7");
		test("r1b1kb1r/pp1p3p/6p1/3q1pN1/3n3Q/8/PP3PPP/R1BK1B1R w kq - 0 14", 4, "0C913F6ECCDBC50AA62FA68B");
		test("r1b4r/pp1p3p/4kQp1/5p2/2qnN3/8/PP3PPP/R1BK4 b - - 3 18", 4, "340F1CBED4FDA1CEAC54E048");
		test("3r1rk1/pbp2pb1/2p1p1pp/3nN3/3PNP2/6P1/PPPB3P/2KRR3 b - - 1 16", 4, "3A1DDA2FA4BB85A16390DF94");
		test("b3r1k1/p1RR4/5bpp/4Np2/5P2/2B3P1/PP5P/2K5 w - - 3 30", 4, "C6E30FE137A644CB998FC8FA");
		test("2r3k1/R2R4/P1N2b1p/5p2/5P2/2B5/1P5P/2K5 b - - 0 35", 4, "57F5988AC738F41A682AAF00");
		test("2rk3r/6pb/1q1n1p2/3pN2p/2n5/1NP2P2/PP2B1PP/1QRK3R b HChc - 0 17", 4, "3798F8BF58553C731E4C0C43");
		test("rk3r1q/pp1n3p/2pnbbp1/3pp3/4p3/2PP1BP1/PPNN1P1P/RKB2R1Q w FAfa - 0 12", 4, "2913D4FED675BB587666D9EC");
		test("r4rk1/pp4qp/1n1n2p1/3p4/3PpP2/6P1/PP1N3P/RKB2R1Q b FA - 0 19", 4, "2F1A7A7280D0A2834BFDB01B");
		test("1q1kb1r1/p4ppp/4p1n1/2Qn4/3P4/6N1/P3PPPP/2NB1KR1 w G - 4 14", 4, "9C9F55B6E56E04EAE9DFDC02");
		test("6r1/p2k4/7R/3P1p2/3nPp1p/7P/P4KP1/5B2 w - - 2 30", 4, "1E4167B1B9E08DDB4F8752AE");
		test("rbk4q/p1pbr2p/1p1pnpp1/3Np3/4PP2/2P2QP1/PPBP3P/2KRB1R1 b a - 1 12", 4, "320136D5B9157BCB17E5147E");
		test("rb3r1q/pknQ3p/1p1p2p1/3pp3/B3P3/2PP2P1/PP1B3P/2KR1R2 b - - 2 21", 4, "F80BD7F0DBA5148CFBECDEE2");
		test("1rkr2b1/p1pp3p/1p2nq2/5p2/5P2/3PQB2/PPP2B1P/R1KR4 w DAd - 0 16", 4, "729B5C38DB39906879383E1B");
		test("2bq1rk1/1ppp1ppp/r1n5/p1bNn3/2P5/4PN2/PP1BBPPP/R2Q1RK1 b - - 3 10", 4, "F6DEC65FB40E1706C6DBA50A");
		test("rnb1k2r/pp1n1ppp/1q2p3/2bpP3/N2N1P2/4B3/PPP3PP/R2QKB1R b KQkq - 4 9", 4, "A4E034294653BEB739CFF3A5");
		test("rnbr1n1k/5ppB/p3p3/1p1pP3/3B1P2/2P4Q/PP4PP/R3K2R w KQ - 5 18", 4, "D0A31FB105ED866B04579D11");
		test("6r1/1b1P3k/p2B4/1p3Pp1/3Q4/8/PP4PP/2R2RK1 b - - 0 32", 4, "620A6BF7B53F51FC7C04EA71");
		test("rnbqk2r/ppp1bppp/4pn2/8/3PN3/3B4/PPP2PPP/R1BQK1NR w KQkq - 3 6", 4, "5B55CEAD476961A67137628C");
		test("r4rk1/pp3ppp/2n1bn2/2q5/8/3BBN1P/PPP2PP1/R2QR1K1 b - - 4 14", 4, "6A3EFA02853354A82BEC8178");
		test("5r2/1p3Rpk/pq3n1p/8/P1Q5/1P5P/2P2PP1/3R2K1 b - - 0 24", 4, "3120347472DAADEF6DBB3DF3");
		test("r4rk1/p1p1bppp/3q1nb1/3p4/3Pp1P1/1PN4P/PBPNQP2/1K1R3R b - - 2 15", 4, "609B8D3F13CF03AC6B766DF9");
		test("r4rk1/4bppp/5n2/p2p4/3P2PP/1P1bP3/PBqNQ3/K2R3R w - - 2 21", 4, "765C430FE12924C69A3DAB7C");
		test("8/6pk/8/8/4P1Pp/3R1P1P/6K1/3N4 w - - 0 50", 4, "8EAA3285372F02E5B8C8DE81");
		test("2r3k1/5bpp/2pq4/pQ2p3/3pP3/1P1N1P2/P5PP/2RR2K1 b - - 0 25", 4, "B64935A5B2DBA053572716ED");
		test("1r1qnrk1/p1p1np1p/4p1pb/4P3/2PP4/BPN2B2/P5PP/R2Q1RK1 w - - 4 17", 4, "588B5ECD3EF0D2ECFB0D9C77");
		test("3q1r2/p1p1npkp/5Npb/2rPPn2/1P6/5B2/P5PP/R2QR1K1 w - - 0 24", 4, "A14F40898057E20AFC108E95");
		test("5r2/p2R1p1p/1b1n1kp1/8/8/5B2/P5PP/2R4K b - - 1 31", 4, "DDA6C2858980D80FDBD394D2");
		test("8/pR3pkp/1bR3p1/6K1/8/5BP1/P1n4P/6r1 b - - 8 38", 4, "EF85CAB290BF2BB2B432F5D3");
		test("1rb1k2r/p3npb1/2npp1pp/q7/1p1NP2P/4B1P1/P1PQ1PBN/1R3RK1 b k - 0 16", 4, "E7C51DFB64BEB5D595DF434E");
		test("1rb2rk1/4ppbp/p5p1/3p4/3B2n1/P1NB3P/1PP1KPP1/1R1QR2q b - - 4 17", 4, "56616BB6EC418987144D3D50");
		test("rnb1kb1r/pp3pp1/4p2p/1NppP2q/3P4/3B1N2/PPPQ1PPP/R3K2R b KQkq - 3 10", 4, "C7A01B11990B6CB982B6F406");
		test("3nr3/1p1k2p1/p2Ppr2/2P5/4RPBp/8/PP4PP/4R1K1 w - - 1 27", 4, "52C0F921B0D5120151856547");
		test("8/2kQ2p1/4r3/1BP5/1R3n1p/8/PP4PP/2R3K1 b - - 2 36", 4, "80E76FBEFC71F643AABB0CD2");
		test("rnbqk1nr/pp1p1pbp/4p1p1/2p5/3PPP2/2N2N2/PPP3PP/R1BQKB1R b KQkq d3 0 5", 4, "6B10F11FCF297AB1C5E467EE");
		test("r4r1k/pp1b2bp/2n1pqp1/3p4/5P2/2NB2B1/PPP3PP/R2Q1RK1 w - - 4 16", 4, "ADA73BD045EEDD3621FFA828");
		test("6rk/pp5p/4p3/3pn3/1K1N4/8/PPP2q2/8 w - - 0 35", 4, "536A8929FDFD67506B899EC2");
		test("2kr3r/1bpqbpp1/pp1ppn1p/8/3PP3/2PQBN1P/PP1N1PP1/K2R3R b - - 2 14", 4, "30DCA45381C9E819ECDF3F04");
		test("2kr1r2/1bp1np2/pp2p2p/4N1p1/3P4/2P3RP/PP1B1PP1/K3R3 w - g6 0 23", 4, "A443BDA02539C41679DC7DE9");
		test("2kr4/2p2p2/ppr1pN2/3b1n2/3P1B2/2PR3P/PP6/K3R3 w - - 3 30", 4, "5DDD724266D6B3E90EF61F99");
		test("2kr4/2p2p2/ppr1p3/3nB2P/2bP4/2P3R1/PP6/K3R3 w - - 1 35", 4, "02BAFC3B85581106A136065B");
		test("r1bqk2r/pp1pppbp/2n2np1/8/3NP3/2N1B3/PPP2PPP/R2QKB1R w KQkq - 3 7", 4, "B54AE827C70011D43E92664C");
		test("1r3rk1/p2n1pbp/1q2p1p1/2ppP3/5P2/P1N5/1PP1Q1PP/1R2BRK1 w - - 1 18", 4, "BDF9EC553A57B7951197FCB4");
		test("4r3/1r4kp/4p1p1/1qpp4/8/1P6/2P1Q1PP/3R1R1K w - - 0 29", 4, "76B7CAE00A215BC283E88DFA");
		test("r1b2rk1/p4ppp/1pn1p3/8/3PP3/P4N2/4BPPP/R1R3K1 b - - 2 16", 4, "480C8BD9F3F7869BC27AE9DB");
		test("5rk1/pb1P1ppp/1p6/1B1n4/8/P4N2/5PPP/R1r3K1 w - - 0 22", 4, "A86047E0C6654EB43D7692AA");
		test("r1bq1rk1/pp2ppbp/6p1/3n4/3N4/2N5/PPP1BPPP/R2Q1RK1 b - - 1 11", 4, "97EE6A72EACACDA8BFD04048");
		test("3r2k1/p2b1pbp/1p2p1p1/q7/3N3P/2r1RB2/P1P2PP1/R3Q1K1 w - - 0 19", 4, "067CF75E9C283ABDFEC59B6C");
		test("8/5p2/3bp1p1/1p6/p2k2P1/P2P1P2/8/3K4 w - - 3 39", 4, "E22776619AD929FB6D314A76");
		test("qk1n1r2/pb2P3/3n4/8/p1P1Q1P1/7P/1R3KQ1/1R5B w - - 0 1", 1, "A5F49E5DBAF465AE9DCE3ACB");
		test("qk1n1r2/pb2P3/3n4/8/p1P1Q1P1/7P/1R3KQ1/1R5B w - - 0 1", 2, "100C6C5A228FEA769A4FE718");
		test("qk1n1r2/pb2P3/3n4/8/p1P1Q1P1/7P/1R3KQ1/1R5B w - - 0 1", 3, "9A944BD17F5C8A8EDE1823A2");
		test("qk1n1r2/pb2P3/3n4/8/p1P1Q1P1/7P/1R3KQ1/1R5B w - - 0 1", 4, "667716A46F1A5B702AC4413F");
		test("3r2b1/ppnr4/1Np1knpp/3R1p2/1N6/1BKQ1qp1/PP4bP/3R4 w - - 0 1", 1, "4C0B6FC01EDED72C6328DDA9");
		test("3r2b1/ppnr4/1Np1knpp/3R1p2/1N6/1BKQ1qp1/PP4bP/3R4 w - - 0 1", 2, "4274FA368C6DFEE4EBD30D12");
		test("3r2b1/ppnr4/1Np1knpp/3R1p2/1N6/1BKQ1qp1/PP4bP/3R4 w - - 0 1", 3, "1E74D0EADE998CF9435A8BF0");
		test("3r2b1/ppnr4/1Np1knpp/3R1p2/1N6/1BKQ1qp1/PP4bP/3R4 w - - 0 1", 4, "25834752B48ADAAA5C059BE8");
		test("1k6/1pp2npb/r2N1rq1/8/2p1N3/3R2P1/QP3P2/3R2K1 w - - 0 1", 1, "AB17EFF87396A4820A21AC29");
		test("1k6/1pp2npb/r2N1rq1/8/2p1N3/3R2P1/QP3P2/3R2K1 w - - 0 1", 2, "16D2C64A85AFF23B0347FA5F");
		test("1k6/1pp2npb/r2N1rq1/8/2p1N3/3R2P1/QP3P2/3R2K1 w - - 0 1", 3, "4F3422E2D89A020022470491");
		test("1k6/1pp2npb/r2N1rq1/8/2p1N3/3R2P1/QP3P2/3R2K1 w - - 0 1", 4, "551A2B6E6D7601D5A2911962");
		test("2r5/2r5/4kn2/5r1p/6P1/3K4/2Q5/8 w - - 0 1", 1, "F64F3D965F41F7162348C89F");
		test("2r5/2r5/4kn2/5r1p/6P1/3K4/2Q5/8 w - - 0 1", 2, "FEBEBC537B1ED76C1DF71CDB");
		test("2r5/2r5/4kn2/5r1p/6P1/3K4/2Q5/8 w - - 0 1", 3, "A4028713B04A6479131F1648");
		test("2r5/2r5/4kn2/5r1p/6P1/3K4/2Q5/8 w - - 0 1", 4, "F4006DF1551082EFF20ED06D");
		test("8/q2rN2p/6p1/4pR1b/R2RkN2/P1Q5/1P2n1K1/6b1 b - - 0 1", 1, "CE2C1C417A3CB2712F1D3592");
		test("8/q2rN2p/6p1/4pR1b/R2RkN2/P1Q5/1P2n1K1/6b1 b - - 0 1", 2, "6B75A467269B5B024B88CE3B");
		test("8/q2rN2p/6p1/4pR1b/R2RkN2/P1Q5/1P2n1K1/6b1 b - - 0 1", 3, "E76157EA400B1324E6202E87");
		test("8/q2rN2p/6p1/4pR1b/R2RkN2/P1Q5/1P2n1K1/6b1 b - - 0 1", 4, "DB158CF41F6E31D0B583B3A9");
		test("r3k2r/p1ppqpb1/bn2pnp1/3PN3/1p2P3/2N2Q1p/PPPBBPPP/R3K2R w KQkq - 0 1", 3, "F9B094172EE79C127F62CF17");
		test("r3k2r/p1ppqpb1/bn2pnp1/3PN3/1p2P3/2N2Q1p/PPPBBPPP/R3K2R w KQkq - 0 1", 4, "3F330006ADACB2F068A62CB1");
		test("3q3k/p2pP1pp/3Q4/2Pp1p2/R4P1P/Br6/5K2/7R b - - 2 32", 1, "01004DF5BAF465AED900B10A");
		test("3q3k/p2pP1pp/3Q4/2Pp1p2/R4P1P/Br6/5K2/7R b - - 2 32", 2, "BE328BA923FD4782114FA414");
		test("3q3k/p2pP1pp/3Q4/2Pp1p2/R4P1P/Br6/5K2/7R b - - 2 32", 3, "C756FA83DAEFC2800D37F969");
		test("3q3k/p2pP1pp/3Q4/2Pp1p2/R4P1P/Br6/5K2/7R b - - 2 32", 4, "A6E5860FC54559D2394E3D7D");
		test("r2q1rk1/p2p1ppp/2pNp1n1/2P1P3/R4PP1/B5K1/7P/3Q1B1R w - - 1 23", 1, "BAF465AEBAF465AE6E1CB653");
		test("r2q1rk1/p2p1ppp/2pNp1n1/2P1P3/R4PP1/B5K1/7P/3Q1B1R w - - 1 23", 2, "AEDEBE202787B35DDE1AA70E");
		test("r2q1rk1/p2p1ppp/2pNp1n1/2P1P3/R4PP1/B5K1/7P/3Q1B1R w - - 1 23", 3, "F153D50002B7B8CB1E55EB1A");
		test("r2q1rk1/p2p1ppp/2pNp1n1/2P1P3/R4PP1/B5K1/7P/3Q1B1R w - - 1 23", 4, "2FD6AF138E5ABC5B1D457460");
		test("r1bq1rk1/1pNp1ppp/p1nQpn2/8/4P3/2N5/PPP2PPP/2KR1B1R b - - 1 12", 1, "A6D3FDBBBAF465AE55E1B6DE");
		test("r1bq1rk1/1pNp1ppp/p1nQpn2/8/4P3/2N5/PPP2PPP/2KR1B1R b - - 1 12", 2, "AC1E35056C855EFDAF206020");
		test("r1bq1rk1/1pNp1ppp/p1nQpn2/8/4P3/2N5/PPP2PPP/2KR1B1R b - - 1 12", 3, "F48FDFBA7F9C961E24C46F94");
		test("r1bq1rk1/1pNp1ppp/p1nQpn2/8/4P3/2N5/PPP2PPP/2KR1B1R b - - 1 12", 4, "8BEE283EB480154ABB2F1E60");
		test("2kr3r/ppp3pp/2nq1p2/3n3b/3P4/4BN1P/PP2BPP1/R2Q1RK1 w - - 2 15", 1, "BAF465AEC204B8EFB75B8D46");
		test("2kr3r/ppp3pp/2nq1p2/3n3b/3P4/4BN1P/PP2BPP1/R2Q1RK1 w - - 2 15", 2, "2858192C092244F7D0CC5F51");
		test("2kr3r/ppp3pp/2nq1p2/3n3b/3P4/4BN1P/PP2BPP1/R2Q1RK1 w - - 2 15", 3, "6412E246186CA082CA39F85C");
		test("2kr3r/ppp3pp/2nq1p2/3n3b/3P4/4BN1P/PP2BPP1/R2Q1RK1 w - - 2 15", 4, "7C2B144CCE15914E8C8DC8B7");
		test("r1bqr1k1/p1p2ppp/2p2n2/3p4/4P3/2BB4/PPP2PPP/R2QR1K1 b - - 0 11", 1, "6EBB389DAE0F930A5BB507F2");
		test("r1bqr1k1/p1p2ppp/2p2n2/3p4/4P3/2BB4/PPP2PPP/R2QR1K1 b - - 0 11", 2, "1E06EC9CAC38044B2FEBD672");
		test("r1bqr1k1/p1p2ppp/2p2n2/3p4/4P3/2BB4/PPP2PPP/R2QR1K1 b - - 0 11", 3, "551C6EDCFBE04544956BFAB1");
		test("r1bqr1k1/p1p2ppp/2p2n2/3p4/4P3/2BB4/PPP2PPP/R2QR1K1 b - - 0 11", 4, "D22E135714D5F72928B6D4E6");
		test("5Bk1/1R3ppp/p1r5/4p3/3pP1b1/P2P2Pq/2P2Q1P/5RK1 b - - 0 33", 1, "30CBBC2BBAF465AEF75594AC");
		test("5Bk1/1R3ppp/p1r5/4p3/3pP1b1/P2P2Pq/2P2Q1P/5RK1 b - - 0 33", 2, "CF1D35A8D55895A9E2C18565");
		test("5Bk1/1R3ppp/p1r5/4p3/3pP1b1/P2P2Pq/2P2Q1P/5RK1 b - - 0 33", 3, "FA975CE3F3172B738F194F71");
		test("5Bk1/1R3ppp/p1r5/4p3/3pP1b1/P2P2Pq/2P2Q1P/5RK1 b - - 0 33", 4, "EDC68D3423C9B00B54E76F01");
		test("r4rk1/pp1qbppp/3p1n2/2p1p3/2Pn4/P1NPP1PP/1P3PB1/R1BQ1RK1 b - - 0 12", 1, "3A257C26BAF465AEA217EBA0");
		test("r4rk1/pp1qbppp/3p1n2/2p1p3/2Pn4/P1NPP1PP/1P3PB1/R1BQ1RK1 b - - 0 12", 2, "363B04ED5B3F99D4E33C18FC");
		test("r4rk1/pp1qbppp/3p1n2/2p1p3/2Pn4/P1NPP1PP/1P3PB1/R1BQ1RK1 b - - 0 12", 3, "4BCFA218208328D6C020B258");
		test("r4rk1/pp1qbppp/3p1n2/2p1p3/2Pn4/P1NPP1PP/1P3PB1/R1BQ1RK1 b - - 0 12", 4, "7C43A824C08BB5AA844822CD");
		test("1k1q4/1p1rpb2/2p2n2/8/5n2/3QN1P1/5PBP/3R2K1 w - - 0 1", 1, "DCE47EC27E2E028DEC15DE60");
		test("1k1q4/1p1rpb2/2p2n2/8/5n2/3QN1P1/5PBP/3R2K1 w - - 0 1", 2, "C2F463E3E88215538D8CD8E2");
		test("1k1q4/1p1rpb2/2p2n2/8/5n2/3QN1P1/5PBP/3R2K1 w - - 0 1", 3, "3BD27A60C9CAA1B5C75D7120");
		test("1k1q4/1p1rpb2/2p2n2/8/5n2/3QN1P1/5PBP/3R2K1 w - - 0 1", 4, "A2AD3530E049CA37982D6564");
		test("2r1k2r/pp5p/8/1b1pB3/1q2nP2/3BK1P1/P6P/R2R4 w k - 0 30", 1, "D7E88ADA27421BF7322D112E");
		test("2r1k2r/pp5p/8/1b1pB3/1q2nP2/3BK1P1/P6P/R2R4 w k - 0 30", 2, "00B891C7A2D0132F2889C0BE");
		test("2r1k2r/pp5p/8/1b1pB3/1q2nP2/3BK1P1/P6P/R2R4 w k - 0 30", 3, "4DE0FE86584E46C8D5E9918D");
		test("2r1k2r/pp5p/8/1b1pB3/1q2nP2/3BK1P1/P6P/R2R4 w k - 0 30", 4, "51D7C9B35E5326352411CABC");
		test("rnb1k1nr/ppp2ppp/1q1bp3/8/5P2/P1N2QP1/1PPPN2P/R1B1KB1R b KQkq - 0 8", 1, "BAF465AEBAF465AED279B078");
		test("rnb1k1nr/ppp2ppp/1q1bp3/8/5P2/P1N2QP1/1PPPN2P/R1B1KB1R b KQkq - 0 8", 2, "5545B450FB74E40022814D04");
		test("rnb1k1nr/ppp2ppp/1q1bp3/8/5P2/P1N2QP1/1PPPN2P/R1B1KB1R b KQkq - 0 8", 3, "0301BAA73F73DF68F4109787");
		test("rnb1k1nr/ppp2ppp/1q1bp3/8/5P2/P1N2QP1/1PPPN2P/R1B1KB1R b KQkq - 0 8", 4, "0ECD9057446FEAFFBDD4C9FE");
		test("5r2/6p1/pppk1p2/6p1/PPKP4/4RP1P/6P1/8 b - b3 0 35", 1, "BAF465AEBAF465AEBAF465AE");
		test("5r2/6p1/pppk1p2/6p1/PPKP4/4RP1P/6P1/8 b - b3 0 35", 2, "26AEFE1F6D16C9485908A0DD");
		test("5r2/6p1/pppk1p2/6p1/PPKP4/4RP1P/6P1/8 b - b3 0 35", 3, "645435675ABA5259A3E62755");
		test("5r2/6p1/pppk1p2/6p1/PPKP4/4RP1P/6P1/8 b - b3 0 35", 4, "CA1AD4EB911538427F28C4AE");
		test("5rk1/1prq2pp/p3p1bn/2bpP3/P2N1PP1/2BP4/1PP1BR1K/R4Q2 b - - 6 23", 1, "BAF465AE272FB31C86B4E7E4");
		test("5rk1/1prq2pp/p3p1bn/2bpP3/P2N1PP1/2BP4/1PP1BR1K/R4Q2 b - - 6 23", 2, "BE3C48B58AFB4D6F92CEB65C");
		test("5rk1/1prq2pp/p3p1bn/2bpP3/P2N1PP1/2BP4/1PP1BR1K/R4Q2 b - - 6 23", 3, "0B4AA0E808913ADD68D04C90");
		test("5rk1/1prq2pp/p3p1bn/2bpP3/P2N1PP1/2BP4/1PP1BR1K/R4Q2 b - - 6 23", 4, "3BFABA230EEFCFE528762833");
		test("1k4B1/3r1Qrp/3pp3/6P1/4P2n/5b2/6Q1/6K1 w - - 0 1", 1, "19AF0A0EBAF465AE2CA302C4");
		test("1k4B1/3r1Qrp/3pp3/6P1/4P2n/5b2/6Q1/6K1 w - - 0 1", 2, "60E36FAB36D109EACBDB9D63");
		test("1k4B1/3r1Qrp/3pp3/6P1/4P2n/5b2/6Q1/6K1 w - - 0 1", 3, "71A37F69A95F748766F4AD72");
		test("1k4B1/3r1Qrp/3pp3/6P1/4P2n/5b2/6Q1/6K1 w - - 0 1", 4, "2B24CF1DE721CA7C8691151C");
		test("1k6/1q6/8/1rpb1Q2/8/2P5/P1KN2p1/8 w - - 0 1", 1, "55A6D34FBAF465AEE27C00D4");
		test("1k6/1q6/8/1rpb1Q2/8/2P5/P1KN2p1/8 w - - 0 1", 2, "251975DBE9719EA062640E53");
		test("1k6/1q6/8/1rpb1Q2/8/2P5/P1KN2p1/8 w - - 0 1", 3, "E346C3084916165DDF97A3F0");
		test("1k6/1q6/8/1rpb1Q2/8/2P5/P1KN2p1/8 w - - 0 1", 4, "8E1B29720A2983BADC0F6ED6");
		test("6k1/6b1/8/rQ1R1q1R/8/8/1n6/2K1N3 w - - 0 1", 1, "B6E2968FBAF465AE0600B951");
		test("6k1/6b1/8/rQ1R1q1R/8/8/1n6/2K1N3 w - - 0 1", 2, "44CB4D893A7A8EE2FFEDFDE9");
		test("6k1/6b1/8/rQ1R1q1R/8/8/1n6/2K1N3 w - - 0 1", 3, "0689B5F746D9EC52077C0259");
		test("6k1/6b1/8/rQ1R1q1R/8/8/1n6/2K1N3 w - - 0 1", 4, "2B92EA2AB0063FD69D17411E");
		test("4k3/2p1pp2/n4p1r/1p1P3p/3P4/1P1P3P/2N4R/1K6 w - - 0 1", 1, "BAF465AEBAF465AEBAF465AE");
		test("4k3/2p1pp2/n4p1r/1p1P3p/3P4/1P1P3P/2N4R/1K6 w - - 0 1", 2, "8AF9B677D0DDABC04A34291C");
		test("4k3/2p1pp2/n4p1r/1p1P3p/3P4/1P1P3P/2N4R/1K6 w - - 0 1", 3, "BCCF153872B87ED024827959");
		test("4k3/2p1pp2/n4p1r/1p1P3p/3P4/1P1P3P/2N4R/1K6 w - - 0 1", 4, "EBA9C4CB1ACC3EE63EEF7355");
		test("1k6/b7/1q6/6p1/1PPB3p/4q3/5B2/2K3Q1 w - - 0 1", 1, "00CCB226BAF465AE1CD5C3BF");
		test("1k6/b7/1q6/6p1/1PPB3p/4q3/5B2/2K3Q1 w - - 0 1", 2, "31F049A3C9B0BA713B35BD95");
		test("1k6/b7/1q6/6p1/1PPB3p/4q3/5B2/2K3Q1 w - - 0 1", 3, "741950D0300924B4E683EEBB");
		test("1k6/b7/1q6/6p1/1PPB3p/4q3/5B2/2K3Q1 w - - 0 1", 4, "9C96800ABDF720E9B9BEC91B");
		test("2r5/8/B2n1n2/4pkn1/8/2NK4/4P3/4R3 w - - 0 1", 1, "6F4A213DBAF465AE326E360C");
		test("2r5/8/B2n1n2/4pkn1/8/2NK4/4P3/4R3 w - - 0 1", 2, "E453F9154718593DA1B68A77");
		test("2r5/8/B2n1n2/4pkn1/8/2NK4/4P3/4R3 w - - 0 1", 3, "ACC181FECF8C3A18C2E8FE97");
		test("2r5/8/B2n1n2/4pkn1/8/2NK4/4P3/4R3 w - - 0 1", 4, "BC5D9C60C6F894CB6972D7E0");
		test("8/5k2/8/3K4/8/8/8/8 w - - 0 1", 1, "BAF465AEBAF465AEBAF465AE");
		test("8/5k2/8/3K4/8/8/8/8 w - - 0 1", 2, "F5A0F415F5A0F415F5A0F415");
		test("8/5k2/8/3K4/8/8/8/8 w - - 0 1", 3, "10B8E4F410B8E4F410B8E4F4");
		test("8/5k2/8/3K4/8/8/8/8 w - - 0 1", 4, "5DD3E2B45DD3E2B45DD3E2B4");
		test("r1bqk2r/pp1n1ppp/2pbpn2/3p4/2PP4/2NBPN2/PPQ2PPP/R1B1K2R b KQkq - 4 7", 1, "BAF465AEF1B75E2D6C5BFBAF");
		test("r1bqk2r/pp1n1ppp/2pbpn2/3p4/2PP4/2NBPN2/PPQ2PPP/R1B1K2R b KQkq - 4 7", 2, "F5293CEDD0C3B6DAF65BED14");
		test("r1bqk2r/pp1n1ppp/2pbpn2/3p4/2PP4/2NBPN2/PPQ2PPP/R1B1K2R b KQkq - 4 7", 3, "CA43A64B5BCDE9A63CEF16C5");
		test("r1bqk2r/pp1n1ppp/2pbpn2/3p4/2PP4/2NBPN2/PPQ2PPP/R1B1K2R b KQkq - 4 7", 4, "FC360F6DDCC014953BFB5AD2");
		test("6k1/p4p2/1p4n1/2pP2Q1/2P2N1p/3b3P/Pq3P2/5BK1 b - - 4 38", 1, "6B2D1C3A7F2BA012E64D9D00");
		test("6k1/p4p2/1p4n1/2pP2Q1/2P2N1p/3b3P/Pq3P2/5BK1 b - - 4 38", 2, "EC4F13C9EF632D084909B2B1");
		test("6k1/p4p2/1p4n1/2pP2Q1/2P2N1p/3b3P/Pq3P2/5BK1 b - - 4 38", 3, "9397D723C533833FE6212A12");
		test("6k1/p4p2/1p4n1/2pP2Q1/2P2N1p/3b3P/Pq3P2/5BK1 b - - 4 38", 4, "806C9A8EA913FBA3A3D83768");
		test("2b5/rp1n1kpp/p2B1b2/8/3N4/3Q4/6PP/2R4K w - - 4 31", 1, "659DB3B3272FB31C0CEF85DE");
		test("2b5/rp1n1kpp/p2B1b2/8/3N4/3Q4/6PP/2R4K w - - 4 31", 2, "7764FC5DC8A9DB255BCE686A");
		test("2b5/rp1n1kpp/p2B1b2/8/3N4/3Q4/6PP/2R4K w - - 4 31", 3, "E925858F5A32C5B7690898FA");
		test("2b5/rp1n1kpp/p2B1b2/8/3N4/3Q4/6PP/2R4K w - - 4 31", 4, "79775ED2F00CCDD73979DCA0");
		test("2r1k2r/1b2pp1p/p2p1np1/4n3/1q1NP3/2N2P2/1PP1B1PP/2QRK2R b Kk - 1 17", 1, "BAF465AEBAF465AE9E58F779");
		test("2r1k2r/1b2pp1p/p2p1np1/4n3/1q1NP3/2N2P2/1PP1B1PP/2QRK2R b Kk - 1 17", 2, "3384290D2436DCC03654AF9B");
		test("2r1k2r/1b2pp1p/p2p1np1/4n3/1q1NP3/2N2P2/1PP1B1PP/2QRK2R b Kk - 1 17", 3, "1CD0A3DD83848D42008A67D1");
		test("2r1k2r/1b2pp1p/p2p1np1/4n3/1q1NP3/2N2P2/1PP1B1PP/2QRK2R b Kk - 1 17", 4, "2E10C1CBEE153BA0A11756CA");
		test("r5k1/5pp1/2p1b1qp/P7/2pPN3/PrQ5/5PPP/2R1R1K1 w - - 3 29", 1, "326E360CBAF465AE280CB279");
		test("r5k1/5pp1/2p1b1qp/P7/2pPN3/PrQ5/5PPP/2R1R1K1 w - - 3 29", 2, "4BDAF1796D368DAB11ED96BA");
		test("r5k1/5pp1/2p1b1qp/P7/2pPN3/PrQ5/5PPP/2R1R1K1 w - - 3 29", 3, "2CBD461558A522D3C2CA7AC8");
		test("r5k1/5pp1/2p1b1qp/P7/2pPN3/PrQ5/5PPP/2R1R1K1 w - - 3 29", 4, "FC35F52E4EDB46D9A404524B");
		test("r4rk1/pb2bpp1/7p/q1pnB3/Np5P/1P4P1/2Q2PB1/3R1RK1 b - - 0 20", 1, "F8647D03BAF465AE5A866710");
		test("r4rk1/pb2bpp1/7p/q1pnB3/Np5P/1P4P1/2Q2PB1/3R1RK1 b - - 0 20", 2, "07E59A3818FFCAFC52C2F72B");
		test("r4rk1/pb2bpp1/7p/q1pnB3/Np5P/1P4P1/2Q2PB1/3R1RK1 b - - 0 20", 3, "04F0C87EFAE355BF707DAA33");
		test("r4rk1/pb2bpp1/7p/q1pnB3/Np5P/1P4P1/2Q2PB1/3R1RK1 b - - 0 20", 4, "52E9A29AD5CF672791B1DEC3");
		test("3r1r2/p4pkp/2npbqp1/2p1n3/PpP1P3/1P3N1P/2BNQPP1/3R1RK1 b - - 6 17", 1, "BAF465AEAEF3FA6FEE432D04");
		test("3r1r2/p4pkp/2npbqp1/2p1n3/PpP1P3/1P3N1P/2BNQPP1/3R1RK1 b - - 6 17", 2, "AC76D8B368DE7EFF36CC8AC0");
		test("3r1r2/p4pkp/2npbqp1/2p1n3/PpP1P3/1P3N1P/2BNQPP1/3R1RK1 b - - 6 17", 3, "BAA6AF7022D9D2F3D3A22023");
		test("3r1r2/p4pkp/2npbqp1/2p1n3/PpP1P3/1P3N1P/2BNQPP1/3R1RK1 b - - 6 17", 4, "30EBAC8D4A8F8223FF6FF6C1");
		test("1Q3r1k/p6p/3p1pp1/2pP1N2/2p5/1P1n4/P4P1P/4R1RK b - - 0 27", 1, "5C76262A34D38858CEC8531E");
		test("1Q3r1k/p6p/3p1pp1/2pP1N2/2p5/1P1n4/P4P1P/4R1RK b - - 0 27", 2, "2F2311172CC643EA12D6CEAC");
		test("1Q3r1k/p6p/3p1pp1/2pP1N2/2p5/1P1n4/P4P1P/4R1RK b - - 0 27", 3, "EA6C8B51426280BD7A342621");
		test("1Q3r1k/p6p/3p1pp1/2pP1N2/2p5/1P1n4/P4P1P/4R1RK b - - 0 27", 4, "84B675EB27FE5CEEDAD07859");
		test("r2r4/8/1pk1pbp1/1pp2n2/5N1p/P1P3P1/1PN1K2P/R1B5 w - - 0 29", 1, "7809854ADAD8D0633EA1D491");
		test("r2r4/8/1pk1pbp1/1pp2n2/5N1p/P1P3P1/1PN1K2P/R1B5 w - - 0 29", 2, "6CE63F323F6285B1AFAEB3F3");
		test("r2r4/8/1pk1pbp1/1pp2n2/5N1p/P1P3P1/1PN1K2P/R1B5 w - - 0 29", 3, "FE4EF17734282877210203A7");
		test("r2r4/8/1pk1pbp1/1pp2n2/5N1p/P1P3P1/1PN1K2P/R1B5 w - - 0 29", 4, "B8A6A811EB58C26AD832D514");
		test("5rk1/p4pbp/8/8/P7/1P1r1BP1/5P2/2R2RK1 w - - 1 23", 1, "614DC4E9BAF465AEBAF465AE");
		test("5rk1/p4pbp/8/8/P7/1P1r1BP1/5P2/2R2RK1 w - - 1 23", 2, "AA34F60C8D84135D0444E8E3");
		test("5rk1/p4pbp/8/8/P7/1P1r1BP1/5P2/2R2RK1 w - - 1 23", 3, "32D3352484F72F1D22C9F024");
		test("5rk1/p4pbp/8/8/P7/1P1r1BP1/5P2/2R2RK1 w - - 1 23", 4, "B7E7881113EA6B45B4DA3802");
		test("r1b2rk1/5ppp/2p1p3/1p6/pqnP4/3Q2R1/P1B2PPP/2K3NR b - - 5 21", 1, "E1F99596BAF465AE89704488");
		test("r1b2rk1/5ppp/2p1p3/1p6/pqnP4/3Q2R1/P1B2PPP/2K3NR b - - 5 21", 2, "E8AC95205F7CC5781DEC54CD");
		test("r1b2rk1/5ppp/2p1p3/1p6/pqnP4/3Q2R1/P1B2PPP/2K3NR b - - 5 21", 3, "ACC940A6B8521EA12D0ED2F4");
		test("r1b2rk1/5ppp/2p1p3/1p6/pqnP4/3Q2R1/P1B2PPP/2K3NR b - - 5 21", 4, "69273A9387EB0745AD751C88");
		test("1k4rr/1pp4p/1p3p2/1P2p2q/P1P4P/3P1Np1/4RPK1/6R1 w - - 0 29", 1, "19516AC19C98B7721B8C830E");
		test("1k4rr/1pp4p/1p3p2/1P2p2q/P1P4P/3P1Np1/4RPK1/6R1 w - - 0 29", 2, "96F057C5589F7BD63D6D2968");
		test("1k4rr/1pp4p/1p3p2/1P2p2q/P1P4P/3P1Np1/4RPK1/6R1 w - - 0 29", 3, "08EE665F0A84A9DBC0EC0D37");
		test("1k4rr/1pp4p/1p3p2/1P2p2q/P1P4P/3P1Np1/4RPK1/6R1 w - - 0 29", 4, "36BCE16340F5B9CE9545F1F5");
		test("4r1k1/p3Bp2/1p6/2n1R1pb/5p2/1BP5/PP6/6K1 b - - 3 32", 1, "2110577767EC532CE1DB1EE9");
		test("4r1k1/p3Bp2/1p6/2n1R1pb/5p2/1BP5/PP6/6K1 b - - 3 32", 2, "36A851FFA22851F19BB811CC");
		test("4r1k1/p3Bp2/1p6/2n1R1pb/5p2/1BP5/PP6/6K1 b - - 3 32", 3, "8ECEE7F64F4382F03075A33C");
		test("4r1k1/p3Bp2/1p6/2n1R1pb/5p2/1BP5/PP6/6K1 b - - 3 32", 4, "1B4B94B50E14FD03C49F5091");
		test("r2krb2/ppq5/2p5/5Q2/3PR3/2P1N2P/PP3PP1/R5K1 w - - 3 29", 1, "BAF465AE27B695A55D5A8BD5");
		test("r2krb2/ppq5/2p5/5Q2/3PR3/2P1N2P/PP3PP1/R5K1 w - - 3 29", 2, "DB2A52507A2939FBAB112FC7");
		test("r2krb2/ppq5/2p5/5Q2/3PR3/2P1N2P/PP3PP1/R5K1 w - - 3 29", 3, "D707357B7333D601C26E4B9F");
		test("r2krb2/ppq5/2p5/5Q2/3PR3/2P1N2P/PP3PP1/R5K1 w - - 3 29", 4, "BEAB781488AC2C9E49303D93");
		test("3r1rk1/1bpq1pp1/5bnp/1p1n4/pN4N1/P1B3P1/1P1QRPBP/4R1K1 w - - 0 1", 1, "8A97D25E0F1E64DF51D58AE6");
		test("3r1rk1/1bpq1pp1/5bnp/1p1n4/pN4N1/P1B3P1/1P1QRPBP/4R1K1 w - - 0 1", 2, "8926656F78CD8F2DBDB3308F");
		test("3r1rk1/1bpq1pp1/5bnp/1p1n4/pN4N1/P1B3P1/1P1QRPBP/4R1K1 w - - 0 1", 3, "CF5D5F4CF1EDC61E112121C2");
		test("3r1rk1/1bpq1pp1/5bnp/1p1n4/pN4N1/P1B3P1/1P1QRPBP/4R1K1 w - - 0 1", 4, "17379A41E264F066234FDDCC");
		test("2k5/1bnpp3/2q2n1p/6rr/PP6/NB2RN2/1B1R1KPP/4Q3 w - - 0 1", 1, "ABA1AA0F4DEC4901A86AFBA4");
		test("2k5/1bnpp3/2q2n1p/6rr/PP6/NB2RN2/1B1R1KPP/4Q3 w - - 0 1", 2, "F57711A1055E36D66524B74D");
		test("2k5/1bnpp3/2q2n1p/6rr/PP6/NB2RN2/1B1R1KPP/4Q3 w - - 0 1", 3, "DF99C82162CAA25C8FC62D12");
		test("2k5/1bnpp3/2q2n1p/6rr/PP6/NB2RN2/1B1R1KPP/4Q3 w - - 0 1", 4, "A4C2D47F91DF14CDBD0BA29D");
		test("2r1r1k1/1QP2p1p/p3q1p1/3R1p2/8/1P4P1/P3P2P/2R3K1 w - - 1 35", 1, "9D5AE446BAF465AE4DB454A0");
		test("2r1r1k1/1QP2p1p/p3q1p1/3R1p2/8/1P4P1/P3P2P/2R3K1 w - - 1 35", 2, "02D216AA2370A84661BDDA16");
		test("2r1r1k1/1QP2p1p/p3q1p1/3R1p2/8/1P4P1/P3P2P/2R3K1 w - - 1 35", 3, "5D2CFD27F4DDEC43DB9142DA");
		test("2r1r1k1/1QP2p1p/p3q1p1/3R1p2/8/1P4P1/P3P2P/2R3K1 w - - 1 35", 4, "873718F2BDA06152164A0CD8");
		test("2r5/1p1k1pp1/1p2rn1p/1Nqp4/P2P1Q2/2P4P/1P4P1/R3R2K b - - 0 23", 1, "26BD0B8B7E306BB01090BBF9");
		test("2r5/1p1k1pp1/1p2rn1p/1Nqp4/P2P1Q2/2P4P/1P4P1/R3R2K b - - 0 23", 2, "AA67D058BDF88448BDF94E60");
		test("2r5/1p1k1pp1/1p2rn1p/1Nqp4/P2P1Q2/2P4P/1P4P1/R3R2K b - - 0 23", 3, "425E9AC1B5DF96EC27AACCA9");
		test("2r5/1p1k1pp1/1p2rn1p/1Nqp4/P2P1Q2/2P4P/1P4P1/R3R2K b - - 0 23", 4, "E5D43E4D9D187281CC4EE876");
		test("r2q1rk1/1pp2p2/p1npbn2/2b1p1B1/4P1P1/2NP3P/PPP2PB1/R2QK2R b KQ - 0 12", 1, "BAF465AE4DEC49014B385DF9");
		test("r2q1rk1/1pp2p2/p1npbn2/2b1p1B1/4P1P1/2NP3P/PPP2PB1/R2QK2R b KQ - 0 12", 2, "1FCA380508562D73EF0D99C7");
		test("r2q1rk1/1pp2p2/p1npbn2/2b1p1B1/4P1P1/2NP3P/PPP2PB1/R2QK2R b KQ - 0 12", 3, "809CBD83AA274E5F7BE163F2");
		test("r2q1rk1/1pp2p2/p1npbn2/2b1p1B1/4P1P1/2NP3P/PPP2PB1/R2QK2R b KQ - 0 12", 4, "4AB41F96628DFAB9B74CE3A9");
		test("r3r1k1/p2q1ppp/bp1p1B2/2pP1n2/2P1pQ2/4P3/PP1N2PP/1BR1R1K1 b - - 0 20", 1, "2F44804FBAF465AE35AB3ADD");
		test("r3r1k1/p2q1ppp/bp1p1B2/2pP1n2/2P1pQ2/4P3/PP1N2PP/1BR1R1K1 b - - 0 20", 2, "D9044B8436A6579AFF55387A");
		test("r3r1k1/p2q1ppp/bp1p1B2/2pP1n2/2P1pQ2/4P3/PP1N2PP/1BR1R1K1 b - - 0 20", 3, "1565AA7C88F16B6919C4FD7D");
		test("r3r1k1/p2q1ppp/bp1p1B2/2pP1n2/2P1pQ2/4P3/PP1N2PP/1BR1R1K1 b - - 0 20", 4, "860A51B15B574F1DF222E6DC");
		test("5rk1/pb3ppp/1p5r/3p2q1/3Nn3/P3PBP1/1PQ2P1P/3RR1K1 b - - 0 21", 1, "BAF465AE5F98F8CB02DEB84C");
		test("5rk1/pb3ppp/1p5r/3p2q1/3Nn3/P3PBP1/1PQ2P1P/3RR1K1 b - - 0 21", 2, "68721D2DC4049335E9A23D37");
		test("5rk1/pb3ppp/1p5r/3p2q1/3Nn3/P3PBP1/1PQ2P1P/3RR1K1 b - - 0 21", 3, "E87CAAEFE1D8B701FB8FA375");
		test("5rk1/pb3ppp/1p5r/3p2q1/3Nn3/P3PBP1/1PQ2P1P/3RR1K1 b - - 0 21", 4, "03259707B5E007AEA01804CF");
		test("5r1k/3Rb1rp/2p1p3/2P1P3/pP2Q3/q3B2P/5P1K/4R3 b - - 2 34", 1, "0F08EEADBAF465AE25DC18F1");
		test("5r1k/3Rb1rp/2p1p3/2P1P3/pP2Q3/q3B2P/5P1K/4R3 b - - 2 34", 2, "AE3D0F30391BD073F8EA2AA2");
		test("5r1k/3Rb1rp/2p1p3/2P1P3/pP2Q3/q3B2P/5P1K/4R3 b - - 2 34", 3, "01F1455BA8BBDD55307A896E");
		test("5r1k/3Rb1rp/2p1p3/2P1P3/pP2Q3/q3B2P/5P1K/4R3 b - - 2 34", 4, "C39E41EEB9A5BCC313114C36");
		test("r4rk1/3q2pp/2n2p2/3p4/2pP3P/2P1N3/2Q2P1P/R3R1K1 b - - 0 24", 1, "BAF465AEDBC3BD44010054D0");
		test("r4rk1/3q2pp/2n2p2/3p4/2pP3P/2P1N3/2Q2P1P/R3R1K1 b - - 0 24", 2, "2D8517759A8CDBB0FA6D8FF3");
		test("r4rk1/3q2pp/2n2p2/3p4/2pP3P/2P1N3/2Q2P1P/R3R1K1 b - - 0 24", 3, "5AFC2A0254F5D971A99E0FE8");
		test("r4rk1/3q2pp/2n2p2/3p4/2pP3P/2P1N3/2Q2P1P/R3R1K1 b - - 0 24", 4, "11010AA4F0C229E6E3488B73");
		test("r3r3/1p1kb1pp/4R3/3pR3/n1pP4/PpP3B1/1P3PPP/3N2K1 b - - 2 27", 1, "E6FA81A6BAF465AEC5B62789");
		test("r3r3/1p1kb1pp/4R3/3pR3/n1pP4/PpP3B1/1P3PPP/3N2K1 b - - 2 27", 2, "312346FACA60E58E53FC7CE1");
		test("r3r3/1p1kb1pp/4R3/3pR3/n1pP4/PpP3B1/1P3PPP/3N2K1 b - - 2 27", 3, "D0648F5D1139550DF7F69A98");
		test("r3r3/1p1kb1pp/4R3/3pR3/n1pP4/PpP3B1/1P3PPP/3N2K1 b - - 2 27", 4, "99CCB165CA05B9FBF628EAFF");
		test("r2r2k1/ppq2pb1/4b1pp/nP1np3/B3N3/B1PP1NP1/2Q2P1P/1R2R1K1 b - - 0 18", 1, "BAF465AEBAF465AEC382B402");
		test("r2r2k1/ppq2pb1/4b1pp/nP1np3/B3N3/B1PP1NP1/2Q2P1P/1R2R1K1 b - - 0 18", 2, "AC6A3C35F75B98D81B4B885F");
		test("r2r2k1/ppq2pb1/4b1pp/nP1np3/B3N3/B1PP1NP1/2Q2P1P/1R2R1K1 b - - 0 18", 3, "72605A7435CCA9BD97B1C424");
		test("r2r2k1/ppq2pb1/4b1pp/nP1np3/B3N3/B1PP1NP1/2Q2P1P/1R2R1K1 b - - 0 18", 4, "9E16FE631ADCC632D0F21F76");
		test("r1bq1r1k/p3bn1p/2pp1p1N/2p1p2P/2P5/2NP4/PP3PP1/R1BQR1K1 b - - 6 16", 1, "BAF465AE4215481002E9ADBE");
		test("r1bq1r1k/p3bn1p/2pp1p1N/2p1p2P/2P5/2NP4/PP3PP1/R1BQR1K1 b - - 6 16", 2, "C125718CC784389E2A431AA3");
		test("r1bq1r1k/p3bn1p/2pp1p1N/2p1p2P/2P5/2NP4/PP3PP1/R1BQR1K1 b - - 6 16", 3, "55F9EDBE7F07FC42186E661F");
		test("r1bq1r1k/p3bn1p/2pp1p1N/2p1p2P/2P5/2NP4/PP3PP1/R1BQR1K1 b - - 6 16", 4, "D8E4C36CF54C5B76CF8A98F8");
		test("8/8/2Rb3p/1P1kN3/3P1P2/7P/2p3PK/2r5 w - - 1 38", 1, "7F404D41F1107742DC67BF7A");
		test("8/8/2Rb3p/1P1kN3/3P1P2/7P/2p3PK/2r5 w - - 1 38", 2, "F043193AF12D6CA0F774D2FA");
		test("8/8/2Rb3p/1P1kN3/3P1P2/7P/2p3PK/2r5 w - - 1 38", 3, "EE7995AF7402812B960AAF52");
		test("8/8/2Rb3p/1P1kN3/3P1P2/7P/2p3PK/2r5 w - - 1 38", 4, "8273BEE7B964D9BA5F0C0168");
		test("8/5kb1/3q3p/p2p1PpP/1PpP4/5P2/PP6/1KN1Q3 b - - 0 35", 1, "CE8A475EBAF465AEBAF465AE");
		test("8/5kb1/3q3p/p2p1PpP/1PpP4/5P2/PP6/1KN1Q3 b - - 0 35", 2, "0A51E0384217AE37B1C106C2");
		test("8/5kb1/3q3p/p2p1PpP/1PpP4/5P2/PP6/1KN1Q3 b - - 0 35", 3, "12DA9FAFC9C23E0995491926");
		test("8/5kb1/3q3p/p2p1PpP/1PpP4/5P2/PP6/1KN1Q3 b - - 0 35", 4, "69C234C470A3ECD7F76E8CB8");
		test("5r1k/6b1/pp2R1pp/3pP3/3P2Nq/5r1P/PP2QPK1/7R b - - 1 29", 1, "D2205151BAF465AEEBFD415B");
		test("5r1k/6b1/pp2R1pp/3pP3/3P2Nq/5r1P/PP2QPK1/7R b - - 1 29", 2, "0DB300AACAD93467DFF3E775");
		test("5r1k/6b1/pp2R1pp/3pP3/3P2Nq/5r1P/PP2QPK1/7R b - - 1 29", 3, "CCC2B05817B1C18AB8D46EBB");
		test("5r1k/6b1/pp2R1pp/3pP3/3P2Nq/5r1P/PP2QPK1/7R b - - 1 29", 4, "921F62D2707FFF236950E00A");
		test("5rk1/5ppp/5b2/3P4/8/Q2p1P2/P3qP1P/3R1RK1 b - - 1 22", 1, "F3146E83BAF465AEC4ECC380");
		test("5rk1/5ppp/5b2/3P4/8/Q2p1P2/P3qP1P/3R1RK1 b - - 1 22", 2, "A45EDAB6980377F8B3F57258");
		test("5rk1/5ppp/5b2/3P4/8/Q2p1P2/P3qP1P/3R1RK1 b - - 1 22", 3, "FC2A29D68CF6F4E9036FA789");
		test("5rk1/5ppp/5b2/3P4/8/Q2p1P2/P3qP1P/3R1RK1 b - - 1 22", 4, "EA7DCE093D3BA7ACCE4BBE4B");
		test("2rqrbk1/5pp1/p2p3p/np6/3pN3/P4P1P/BP1Q1P2/R1B3K1 b - - 2 23", 1, "5ADD0E93BAF465AEE8AE22C7");
		test("2rqrbk1/5pp1/p2p3p/np6/3pN3/P4P1P/BP1Q1P2/R1B3K1 b - - 2 23", 2, "AEAB961CC37C147A26E1FC35");
		test("2rqrbk1/5pp1/p2p3p/np6/3pN3/P4P1P/BP1Q1P2/R1B3K1 b - - 2 23", 3, "F7E0072879CE6C3025F1258F");
		test("2rqrbk1/5pp1/p2p3p/np6/3pN3/P4P1P/BP1Q1P2/R1B3K1 b - - 2 23", 4, "80D9D8BCFC5EB2F4134FEA08");
		test("rnbq1rk1/2p3b1/pp1p2pp/3Ppn2/2P5/2N4P/PP1BBPPN/R2Q1RK1 b - - 1 13", 1, "BAF465AEBAF465AED076DB90");
		test("rnbq1rk1/2p3b1/pp1p2pp/3Ppn2/2P5/2N4P/PP1BBPPN/R2Q1RK1 b - - 1 13", 2, "73E915756C34E326CA4B0BF9");
		test("rnbq1rk1/2p3b1/pp1p2pp/3Ppn2/2P5/2N4P/PP1BBPPN/R2Q1RK1 b - - 1 13", 3, "B77B2DFF89D8A36F1E800DD4");
		test("rnbq1rk1/2p3b1/pp1p2pp/3Ppn2/2P5/2N4P/PP1BBPPN/R2Q1RK1 b - - 1 13", 4, "D4DB519B8D00BD41E226E763");
		test("2rq1rk1/1p1bppbp/p2p1np1/n7/3NP3/P1N1BP2/1PPQB1PP/1K1R3R w - - 5 13", 1, "BAF465AEBAF465AE7057DFB7");
		test("2rq1rk1/1p1bppbp/p2p1np1/n7/3NP3/P1N1BP2/1PPQB1PP/1K1R3R w - - 5 13", 2, "68783DE117E346F5F7C4036D");
		test("2rq1rk1/1p1bppbp/p2p1np1/n7/3NP3/P1N1BP2/1PPQB1PP/1K1R3R w - - 5 13", 3, "F01877F159E72717FC6D6F76");
		test("2rq1rk1/1p1bppbp/p2p1np1/n7/3NP3/P1N1BP2/1PPQB1PP/1K1R3R w - - 5 13", 4, "265A0FD3B6A98B91081B15F3");
		test("r3r1k1/1ppq1p1p/p1n2bp1/3p1b2/3P4/BBP2N1P/P2Q1PPK/4RR2 b - - 3 18", 1, "BAF465AE1F3CF44BAE0F7F01");
		test("r3r1k1/1ppq1p1p/p1n2bp1/3p1b2/3P4/BBP2N1P/P2Q1PPK/4RR2 b - - 3 18", 2, "E3B0A3BF8B51DED60B485265");
		test("r3r1k1/1ppq1p1p/p1n2bp1/3p1b2/3P4/BBP2N1P/P2Q1PPK/4RR2 b - - 3 18", 3, "FC47B489FDA5D1CF3935BB8F");
		test("r3r1k1/1ppq1p1p/p1n2bp1/3p1b2/3P4/BBP2N1P/P2Q1PPK/4RR2 b - - 3 18", 4, "B725AC69845D835463DA6DFE");
		test("r2q1rk1/p4ppp/2p1pn2/2bp4/8/1P1QPN2/PB3PPP/R3K2R w KQ - 0 14", 1, "BAF465AE4DEC4901AA33CBE6");
		test("r2q1rk1/p4ppp/2p1pn2/2bp4/8/1P1QPN2/PB3PPP/R3K2R w KQ - 0 14", 2, "8A24B9CBCDF897F651006AFA");
		test("r2q1rk1/p4ppp/2p1pn2/2bp4/8/1P1QPN2/PB3PPP/R3K2R w KQ - 0 14", 3, "D88628375A020F869F87F8D1");
		test("r2q1rk1/p4ppp/2p1pn2/2bp4/8/1P1QPN2/PB3PPP/R3K2R w KQ - 0 14", 4, "0F96CD712B26C4F45EA72A2E");
		
		System.out.println(HitCounter.dump());
		
		if(skipAssertions)
			fail(">>>skipped all asserions! This is intentional ONLY IF we are gathering correct values for new testcases.");
		
	}

}
